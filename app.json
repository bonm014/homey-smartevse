{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.example.smartevse",
  "version": "2.0.0",
  "compatibility": ">=12.4.5",
  "sdk": 3,
  "name": {
    "en": "SmartEVSE",
    "nl": "SmartEVSE"
  },
  "description": {
    "en": "Smart, efficient, and reliable electric vehicle charging.",
    "nl": "Slim, efficiÃ«nt en betrouwbaar elektrisch laden."
  },
  "category": [
    "energy"
  ],
  "brandColor": "#00A651",
  "permissions": [],
  "author": {
    "name": "Rex Markesteijn",
    "email": "rmarkesteijn@icloud.com"
  },
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png"
  },
  "homepage": "https://github.com/spikerm/homey-smartevse",
  "supportUrl": "https://github.com/spikerm/homey-smartevse/issues",
  "bugs": {
    "url": "https://github.com/spikerm/homey-smartevse/issues"
  },
  "communityTopicId": 147883,
  "flow": {
    "triggers": [
      {
        "id": "charging_started",
        "title": {
          "en": "Charging started",
          "nl": "Laden gestart"
        }
      },
      {
        "id": "charging_stopped",
        "title": {
          "en": "Charging stopped",
          "nl": "Laden gestopt"
        }
      },
      {
        "id": "rfid_scanned",
        "title": {
          "en": "RFID card scanned",
          "nl": "RFID kaart gescand"
        },
        "tokens": [
          {
            "name": "rfid",
            "type": "string",
            "title": {
              "en": "RFID card ID",
              "nl": "RFID kaart ID"
            }
          },
          {
            "name": "name",
            "type": "string",
            "title": {
              "en": "Name",
              "nl": "Naam"
            }
          },
          {
            "name": "allowed",
            "type": "boolean",
            "title": {
              "en": "Allowed",
              "nl": "Toegestaan"
            }
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "reboot",
        "title": {
          "en": "Reboot SmartEVSE",
          "nl": "Herstart SmartEVSE"
        },
        "titleFormatted": {
          "en": "Reboot SmartEVSE",
          "nl": "Herstart SmartEVSE"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=smartevse"
          }
        ]
      },
      {
        "id": "reset_override_current",
        "title": {
          "en": "Reset SmartEVSE override current",
          "nl": "Reset SmartEVSE override-stroom"
        },
        "titleFormatted": {
          "en": "Reset SmartEVSE override current",
          "nl": "Reset SmartEVSE override-stroom"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=smartevse"
          }
        ]
      },
      {
        "id": "reset_rfid_totals",
        "title": {
          "en": "Reset RFID totals",
          "nl": "Reset RFID totalen"
        },
        "titleFormatted": {
          "en": "Reset RFID totals",
          "nl": "Reset RFID totalen"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=smartevse"
          }
        ]
      },
      {
        "id": "set_mode",
        "title": {
          "en": "Set SmartEVSE mode",
          "nl": "Zet SmartEVSE mode"
        },
        "titleFormatted": {
          "en": "Set SmartEVSE mode to [[mode]]",
          "nl": "Zet SmartEVSE mode naar [[mode]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=smartevse"
          },
          {
            "type": "dropdown",
            "name": "mode",
            "title": {
              "en": "Mode",
              "nl": "Mode"
            },
            "values": [
              {
                "id": "0",
                "title": {
                  "en": "OFF",
                  "nl": "UIT"
                }
              },
              {
                "id": "1",
                "title": {
                  "en": "NORMAL",
                  "nl": "NORMAAL"
                }
              },
              {
                "id": "2",
                "title": {
                  "en": "SOLAR",
                  "nl": "ZON"
                }
              },
              {
                "id": "3",
                "title": {
                  "en": "SMART",
                  "nl": "SLIM"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "set_override_current",
        "title": {
          "en": "Set SmartEVSE override current",
          "nl": "Zet SmartEVSE override-stroom"
        },
        "titleFormatted": {
          "en": "Set SmartEVSE override current to [[current_a]] A",
          "nl": "Zet SmartEVSE override-stroom naar [[current_a]] A"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=smartevse"
          },
          {
            "type": "number",
            "name": "current_a",
            "title": {
              "en": "Current (A)",
              "nl": "Stroom (A)"
            },
            "min": 0,
            "max": 32,
            "step": 0.1
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "name": {
        "en": "BESEN"
      },
      "class": "evcharger",
      "capabilities": [
        "evcharger_charging",
        "evcharger_charging_state",
        "meter_power",
        "measure_power",
        "measure_temperature"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "settings": [
        {
          "id": "password",
          "type": "password",
          "label": {
            "nl": "Wachtwoord",
            "en": "Password"
          }
        }
      ],
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "images": {
        "small": "/drivers/besen/assets/images/small.png",
        "large": "/drivers/besen/assets/images/large.png",
        "xlarge": "/drivers/besen/assets/images/xlarge.png"
      },
      "id": "besen"
    },
    {
      "name": {
        "en": "SmartEVSE",
        "nl": "SmartEVSE"
      },
      "class": "evcharger",
      "energy": {
        "evCharger": true,
        "meterPowerImportedCapability": "meter_power"
      },
      "capabilities": [
        "measure_power",
        "meter_power",
        "evcharger_charging_state",
        "evcharger_charging",
        "charger_mode",
        "override_current_a",
        "override_reset",
        "plug_status",
        "charging_state",
        "session_minutes",
        "rfid_status",
        "rfid_last",
        "rfid_allowed",
        "rfid_name",
        "rfid_totals",
        "alarm_generic"
      ],
      "images": {
        "small": "/drivers/smartevse/assets/images/small.png",
        "large": "/drivers/smartevse/assets/images/large.png"
      },
      "pair": [
        {
          "id": "start",
          "title": {
            "en": "Connect",
            "nl": "Verbinden"
          }
        },
        {
          "id": "done",
          "template": "done",
          "title": {
            "en": "Added",
            "nl": "Toegevoegd"
          },
          "description": {
            "en": "Your SmartEVSE has been added.",
            "nl": "Je SmartEVSE is toegevoegd."
          }
        }
      ],
      "flow": {
        "triggers": [
          {
            "id": "charging_started",
            "title": {
              "en": "Charging started",
              "nl": "Laden gestart"
            }
          },
          {
            "id": "charging_stopped",
            "title": {
              "en": "Charging stopped",
              "nl": "Laden gestopt"
            }
          },
          {
            "id": "rfid_scanned",
            "title": {
              "en": "RFID card scanned",
              "nl": "RFID kaart gescand"
            },
            "tokens": [
              {
                "name": "rfid",
                "type": "string",
                "title": {
                  "en": "RFID card ID",
                  "nl": "RFID kaart ID"
                }
              },
              {
                "name": "name",
                "type": "string",
                "title": {
                  "en": "Name",
                  "nl": "Naam"
                }
              },
              {
                "name": "allowed",
                "type": "boolean",
                "title": {
                  "en": "Allowed",
                  "nl": "Toegestaan"
                }
              }
            ]
          }
        ],
        "actions": [
          {
            "id": "reboot",
            "title": {
              "en": "Reboot SmartEVSE",
              "nl": "Herstart SmartEVSE"
            },
            "titleFormatted": {
              "en": "Reboot SmartEVSE",
              "nl": "Herstart SmartEVSE"
            },
            "args": [
              {
                "type": "device",
                "name": "device",
                "filter": "driver_id=smartevse"
              }
            ]
          },
          {
            "id": "reset_override_current",
            "title": {
              "en": "Reset SmartEVSE override current",
              "nl": "Reset SmartEVSE override-stroom"
            },
            "titleFormatted": {
              "en": "Reset SmartEVSE override current",
              "nl": "Reset SmartEVSE override-stroom"
            },
            "args": [
              {
                "type": "device",
                "name": "device",
                "filter": "driver_id=smartevse"
              }
            ]
          },
          {
            "id": "reset_rfid_totals",
            "title": {
              "en": "Reset RFID totals",
              "nl": "Reset RFID totalen"
            },
            "titleFormatted": {
              "en": "Reset RFID totals",
              "nl": "Reset RFID totalen"
            },
            "args": [
              {
                "type": "device",
                "name": "device",
                "filter": "driver_id=smartevse"
              }
            ]
          },
          {
            "id": "set_mode",
            "title": {
              "en": "Set SmartEVSE mode",
              "nl": "Zet SmartEVSE mode"
            },
            "titleFormatted": {
              "en": "Set SmartEVSE mode to [[mode]]",
              "nl": "Zet SmartEVSE mode naar [[mode]]"
            },
            "args": [
              {
                "type": "device",
                "name": "device",
                "filter": "driver_id=smartevse"
              },
              {
                "type": "dropdown",
                "name": "mode",
                "title": {
                  "en": "Mode",
                  "nl": "Mode"
                },
                "values": [
                  {
                    "id": "0",
                    "title": {
                      "en": "OFF",
                      "nl": "UIT"
                    }
                  },
                  {
                    "id": "1",
                    "title": {
                      "en": "NORMAL",
                      "nl": "NORMAAL"
                    }
                  },
                  {
                    "id": "2",
                    "title": {
                      "en": "SOLAR",
                      "nl": "ZON"
                    }
                  },
                  {
                    "id": "3",
                    "title": {
                      "en": "SMART",
                      "nl": "SLIM"
                    }
                  }
                ]
              }
            ]
          },
          {
            "id": "set_override_current",
            "title": {
              "en": "Set SmartEVSE override current",
              "nl": "Zet SmartEVSE override-stroom"
            },
            "titleFormatted": {
              "en": "Set SmartEVSE override current to [[current_a]] A",
              "nl": "Zet SmartEVSE override-stroom naar [[current_a]] A"
            },
            "args": [
              {
                "type": "device",
                "name": "device",
                "filter": "driver_id=smartevse"
              },
              {
                "type": "number",
                "name": "current_a",
                "title": {
                  "en": "Current (A)",
                  "nl": "Stroom (A)"
                },
                "min": 0,
                "max": 32,
                "step": 0.1
              }
            ]
          }
        ]
      },
      "settings": [
        {
          "id": "host",
          "type": "text",
          "label": {
            "en": "Host (IP or hostname)",
            "nl": "Host (IP of hostname)"
          },
          "value": ""
        },
        {
          "id": "pollInterval",
          "type": "number",
          "label": {
            "en": "Poll interval (seconds)",
            "nl": "Poll-interval (seconden)"
          },
          "value": 10,
          "min": 5,
          "max": 120
        },
        {
          "id": "voltageSingle",
          "type": "number",
          "label": {
            "en": "Voltage single-phase (V)",
            "nl": "Spanning 1-fase (V)"
          },
          "value": 230,
          "min": 180,
          "max": 260,
          "step": 1
        },
        {
          "id": "voltageThreeLL",
          "type": "number",
          "label": {
            "en": "Voltage three-phase L-L (V)",
            "nl": "Spanning 3-fase L-L (V)"
          },
          "value": 400,
          "min": 340,
          "max": 440,
          "step": 1
        },
        {
          "id": "rfidWhitelistJson",
          "type": "textarea",
          "label": {
            "en": "RFID whitelist (JSON)",
            "nl": "RFID whitelist (JSON)"
          },
          "value": "[]"
        },
        {
          "id": "denyUnknownRfid",
          "type": "checkbox",
          "label": {
            "en": "Deny unknown RFID",
            "nl": "Onbekende RFID weigeren"
          },
          "value": true
        },
        {
          "id": "unlockMode",
          "type": "number",
          "label": {
            "en": "Unlock mode (0=OFF,1=NORMAL,2=SOLAR,3=SMART)",
            "nl": "Unlock mode (0=UIT,1=NORMAAL,2=ZON,3=SLIM)"
          },
          "value": 3,
          "min": 0,
          "max": 3
        },
        {
          "id": "unlockCurrentA",
          "type": "number",
          "label": {
            "en": "Unlock override current (A, 0=disable)",
            "nl": "Unlock override-stroom (A, 0=uit)"
          },
          "value": 0,
          "min": 0,
          "max": 32,
          "step": 0.1
        }
      ],
      "id": "smartevse"
    }
  ],
  "capabilities": {
    "charger_mode": {
      "type": "enum",
      "title": {
        "en": "Mode",
        "nl": "Mode"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "picker",
      "values": [
        {
          "id": "off",
          "title": {
            "en": "OFF",
            "nl": "UIT"
          }
        },
        {
          "id": "normal",
          "title": {
            "en": "NORMAL",
            "nl": "NORMAAL"
          }
        },
        {
          "id": "solar",
          "title": {
            "en": "SOLAR",
            "nl": "ZON"
          }
        },
        {
          "id": "smart",
          "title": {
            "en": "SMART",
            "nl": "SLIM"
          }
        }
      ]
    },
    "charging_state": {
      "type": "enum",
      "title": {
        "en": "Charging state",
        "nl": "Laadstatus"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "picker",
      "values": [
        {
          "id": "idle",
          "title": {
            "en": "Idle",
            "nl": "Idle"
          }
        },
        {
          "id": "charging",
          "title": {
            "en": "Charging",
            "nl": "Laden"
          }
        },
        {
          "id": "finished",
          "title": {
            "en": "Finished",
            "nl": "Klaar"
          }
        }
      ]
    },
    "override_current_a": {
      "type": "number",
      "title": {
        "en": "Override current (A)",
        "nl": "Override-stroom (A)"
      },
      "units": {
        "en": "A",
        "nl": "A"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "slider",
      "min": 0,
      "max": 32,
      "step": 0.1
    },
    "override_reset": {
      "type": "boolean",
      "title": {
        "en": "Reset override",
        "nl": "Reset override"
      },
      "getable": false,
      "setable": true,
      "uiComponent": "button"
    },
    "plug_status": {
      "type": "enum",
      "title": {
        "en": "Plug status",
        "nl": "Stekker status"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "picker",
      "values": [
        {
          "id": "plugged",
          "title": {
            "en": "Connected",
            "nl": "Aangesloten"
          }
        },
        {
          "id": "unplugged",
          "title": {
            "en": "Disconnected",
            "nl": "Niet aangesloten"
          }
        }
      ]
    },
    "rfid_allowed": {
      "type": "boolean",
      "title": {
        "en": "RFID allowed",
        "nl": "RFID toegestaan"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor"
    },
    "rfid_last": {
      "type": "string",
      "title": {
        "en": "Last RFID card",
        "nl": "Laatste RFID kaart"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor"
    },
    "rfid_name": {
      "type": "string",
      "title": {
        "en": "RFID name",
        "nl": "RFID naam"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor"
    },
    "rfid_status": {
      "type": "string",
      "title": {
        "en": "RFID status",
        "nl": "RFID status"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor"
    },
    "rfid_totals": {
      "type": "string",
      "title": {
        "en": "RFID totals (kWh)",
        "nl": "RFID totalen (kWh)"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor"
    },
    "session_minutes": {
      "type": "number",
      "title": {
        "en": "Session duration",
        "nl": "Sessie duur"
      },
      "units": {
        "en": "min",
        "nl": "min"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "min": 0,
      "max": 100000,
      "step": 1
    }
  }
}